# Phase 3-14: 绩效评估指标

## 一、概念定义

### 1.1 绩效评估的意义
通过量化指标客观评价投资策略的表现，为策略比较、选择和优化提供依据。

**评估维度：**
- **收益能力**：赚了多少钱
- **风险控制**：风险有多大
- **收益质量**：承担单位风险获得多少收益
- **稳定性**：表现是否持续稳定
- **实用性**：是否可执行、容量多大

### 1.2 评估框架

```
┌─────────────────────────────────────────────────────────┐
│                  绩效评估维度                            │
├─────────────────────────────────────────────────────────┤
│  收益指标                                              │
│  ├── 绝对收益：总收益、年化收益                         │
│  └── 相对收益：超额收益、信息比率                       │
├─────────────────────────────────────────────────────────┤
│  风险指标                                              │
│  ├── 波动风险：标准差、下行标准差                       │
│  ├── 回撤风险：最大回撤、回撤持续时间                   │
│  └── 尾部风险：VaR、CVaR、偏度、峰度                    │
├─────────────────────────────────────────────────────────┤
│  风险调整收益                                          │
│  ├── 夏普比率：收益/总风险                              │
│  ├── 索提诺比率：收益/下行风险                          │
│  ├── 卡玛比率：收益/最大回撤                            │
│  └── 特雷诺比率：收益/系统性风险                        │
├─────────────────────────────────────────────────────────┤
│  其他维度                                              │
│  ├── 执行效率：换手率、交易成本占比                     │
│  ├── 容量评估：规模对收益的影响                         │
│  └── 风格分析：收益来源归因                             │
└─────────────────────────────────────────────────────────┘
```

---

## 二、算法原理

### 2.1 收益指标

**绝对收益**
```
累计收益率：
R_cum = (V_final / V_initial) - 1

年化收益率（CAGR）：
R_ann = (V_final / V_initial)^(252/n) - 1
其中n为交易日数

算术平均收益率：
R_avg = (1/n) × Σ R_i

几何平均收益率：
R_geo = [(1+R_1)(1+R_2)...(1+R_n)]^(1/n) - 1

注意：几何平均 ≤ 算术平均（波动越大差距越大）
```

**相对收益**
```
超额收益（Alpha）：
α = R_p - R_b
其中R_p为组合收益，R_b为基准收益

主动收益（Active Return）：
与超额收益相同

跟踪误差（Tracking Error）：
TE = std(R_p - R_b)
年化：TE_ann = TE_daily × √252

信息比率（Information Ratio）：
IR = (R_p - R_b) / TE
衡量单位主动风险的超额收益
```

### 2.2 风险指标

**波动率**
```
标准差（总体风险）：
σ = sqrt(Σ(R_i - R_avg)² / (n-1))
年化：σ_ann = σ_daily × √252

下行标准差（Downside Deviation）：
σ_d = sqrt(Σ(min(R_i - R_target, 0))² / n)
只计算低于目标收益的波动

实现波动率（Realized Volatility）：
使用高频数据计算的波动率估计
```

**回撤指标**
```
回撤（Drawdown）：
DD_t = (Peak_t - Current_t) / Peak_t
其中Peak_t是t时刻前的历史最高值

最大回撤（Max Drawdown）：
MDD = max(DD_t) for all t

回撤持续时间：
从高点到恢复高点的交易日数

回撤恢复时间：
从最低点到恢复高点的交易日数

卡玛比率分母：
使用最大回撤而非波动率
```

**尾部风险**
```
风险价值（VaR）：
在给定置信水平下的最大可能损失
VaR_95%：95%置信度损失不超过该值

计算方法：
• 参数法：假设正态分布
  VaR = μ - z × σ
• 历史模拟法：历史分位数
• 蒙特卡洛法：模拟分布

条件风险价值（CVaR/ES）：
超过VaR时的平均损失
CVaR = E[Loss | Loss > VaR]

偏度（Skewness）：
衡量收益分布不对称性
负偏：左尾长，大跌风险高

峰度（Kurtosis）：
衡量分布尾部厚度
高峰度：极端事件发生概率高
```

### 2.3 风险调整收益指标

**夏普比率（Sharpe Ratio）**
```
公式：
Sharpe = (R_p - R_f) / σ_p

其中：
• R_p：组合年化收益
• R_f：无风险利率（年化）
• σ_p：组合年化标准差

解读：
• 每承担一单位总风险，获得的超额收益
• Sharpe > 1：较好
• Sharpe > 2：优秀
• Sharpe > 3：卓越

注意：
• 假设收益正态分布
• 不考虑序列相关性
• 不同策略间可比
```

**索提诺比率（Sortino Ratio）**
```
公式：
Sortino = (R_p - R_target) / σ_d

其中σ_d是下行标准差

与夏普比率区别：
• 只惩罚下行波动
• 更符合投资者偏好
• 对收益分布不对称敏感
```

**卡玛比率（Calmar Ratio）**
```
公式：
Calmar = R_ann / |MDD|

特点：
• 使用最大回撤作为风险度量
• 直观反映投资者最痛苦的体验
• 适合绝对收益策略
• 需要足够长历史（通常3年以上）
```

**特雷诺比率（Treynor Ratio）**
```
公式：
Treynor = (R_p - R_f) / β_p

其中β_p是组合贝塔系数

特点：
• 只考虑系统性风险
• 适合评估分散化组合
• 假设CAPM成立
```

**欧米茄比率（Omega Ratio）**
```
公式：
Omega = E[max(R - R_target, 0)] / E[max(R_target - R, 0)]
       = 上行收益期望 / 下行损失期望

特点：
• 使用全部收益分布信息
• 不假设分布形态
• 门槛收益可自定义
```

### 2.4 综合评估指标

**收益风险比矩阵**
```
              总风险      下行风险      最大回撤
绝对收益    夏普比率    索提诺比率    卡玛比率
相对收益    信息比率      —            —
```

** Sterling比率**
```
使用平均最大回撤代替单一最大回撤：
Sterling = R_ann / avg(top N drawdowns)

减少单一极端事件的影响
```

** Burke比率**
```
使用回撤平方和的平方根：
Burke = R_ann / sqrt(Σ(DD_i)²)

更关注回撤的频率和深度
```

---

## 三、应用场景

### 3.1 策略比较

**同类型策略比较**
```
评估维度：
1. 夏普比率：风险调整收益
2. 最大回撤：极端风险
3. 胜率：盈利稳定性
4. 容量：规模对收益的影响

示例：
策略A：年化20%，夏普1.5，最大回撤15%
策略B：年化15%，夏普1.8，最大回撤8%
→ 策略B更优（风险调整后收益更高）
```

**不同类型策略**
```
比较注意：
• 收益分布特性不同
• 使用多个指标综合评估
• 考虑投资者风险偏好

示例：
趋势策略：高夏普但可能有长期横盘
均值回复：高胜率但单笔盈利小
事件驱动：高盈亏比但机会少
```

### 3.2 组合配置

**风险预算分配**
```
基于风险贡献的配置：
• 计算各策略风险贡献
• 按目标风险贡献分配资金
• 最大化组合夏普比率

评估指标：
• 边际风险贡献
• 风险分散效果
• 组合夏普比率
```

**动态调整依据**
```
基于绩效指标的调整：
• 夏普比率下降 → 降低权重
• 回撤扩大 → 暂停或减仓
• 容量饱和 → 限制规模

监控指标：
• 滚动夏普比率（如252日）
• 当前回撤vs历史最大回撤
• 近期胜率变化
```

### 3.3 业绩归因

**收益归因**
```
Brinson归因：
• 配置效应：资产配置贡献
• 选择效应：个券选择贡献
• 交互效应：配置与选择的交互

因子归因：
• 暴露在各因子的收益贡献
• 特质收益（Alpha）
• 风格漂移监控
```

**风险归因**
```
风险来源分解：
• 市场风险（Beta）
• 行业风险
• 风格因子风险
• 特质风险

工具：
• 协方差矩阵分解
• 主成分分析
• 压力测试
```

---

## 四、注意事项

### 4.1 指标局限性

**夏普比率的局限**
```
问题：
• 假设收益正态分布（金融数据常有 fat tail）
• 不考虑序列相关性
• 可被操纵（平滑收益）
• 不同频率数据不可直接比较

改进：
• 结合偏度、峰度分析
• 使用修正夏普比率
• 考虑自相关的调整
```

**最大回撤的局限**
```
问题：
• 对时间点敏感
• 样本依赖性大
• 不考虑回撤频率
• 不一定是未来最坏情况

应对：
• 查看回撤分布
• 平均回撤、回撤频率
• 蒙特卡洛模拟最坏情况
```

**年化计算的陷阱**
```
❌ 短期收益简单年化
    月收益10% → 年化213%（误导）

✅ 使用CAGR计算
✅ 需要足够长历史数据（至少1年）
✅ 不同策略用相同时期比较
```

### 4.2 数据质量要求

**样本长度**
```
最低要求：
• 至少包含一个完整市场周期
• 建议3-5年以上数据
• 经历过不同市场环境

过短数据的后果：
• 未经历极端情况
• 指标不稳定
• 未来表现偏差大
```

**频率选择**
```
日频数据：
• 最常用
• 可计算日波动率
• 年化因子√252

周/月频：
• 减少噪声
• 降低交易成本敏感性
• 年化因子相应调整

高频数据：
• 实现波动率计算
• 微观结构分析
• 需要更多计算资源
```

### 4.3 操纵与误用

**收益平滑（Return Smoothing）**
```
手法：
• 少报亏损月份收益
• 延迟确认损失
• 选择性披露

识别：
• 收益自相关性检验
• 与可比策略对比
• 独立第三方审计
```

**幸存者偏差**
```
问题：
• 只展示存活策略
• 失败策略被隐藏
• 整体表现被夸大

防范：
• 要求展示全部策略历史
• 了解策略关闭率
• 独立验证数据
```

**费用影响**
```
注意：
• 费前 vs 费后收益
• 管理费、业绩报酬
• 交易佣金、滑点

评估：
• 投资者应关注费后收益
• 高费率需要更高超额收益支撑
```

### 4.4 综合评估建议

**多维度评估**
```
必看指标：
1. 年化收益（绝对和相对）
2. 夏普比率（风险调整）
3. 最大回撤（极端风险）
4. 胜率/盈亏比（交易质量）
5. 容量评估（可执行性）

辅助指标：
• 索提诺比率
• 卡玛比率
• 信息比率
• Omega比率
```

**定性因素**
```
非量化因素同样重要：
• 投资逻辑是否清晰
• 团队是否稳定
• 系统是否可靠
• 风控是否严格
• 容量是否充足
```

---

## 五、核心概念总结

```
┌─────────────────────────────────────────────────────────┐
│                 绩效评估指标体系                         │
├─────────────────────────────────────────────────────────┤
│  收益指标                                              │
│  ├── 绝对：累计收益、年化收益（CAGR）                   │
│  └── 相对：超额收益、信息比率                           │
├─────────────────────────────────────────────────────────┤
│  风险指标                                              │
│  ├── 波动：标准差、下行标准差                           │
│  ├── 回撤：最大回撤、回撤持续时间                       │
│  └── 尾部：VaR、CVaR、偏度、峰度                        │
├─────────────────────────────────────────────────────────┤
│  风险调整收益（核心指标）                              │
│  ├── 夏普比率：收益/总波动（最常用）                    │
│  ├── 索提诺比率：收益/下行波动                          │
│  ├── 卡玛比率：收益/最大回撤                            │
│  └── 信息比率：主动收益/跟踪误差                        │
├─────────────────────────────────────────────────────────┤
│  应用原则                                              │
│  ├── 多维度：不依赖单一指标                             │
│  ├── 同基准：相同市场环境、相同时期比较                 │
│  ├── 费后看：关注投资者实际获得                         │
│  └── 长期观：足够长历史才有说服力                       │
├─────────────────────────────────────────────────────────┤
│  警惕陷阱                                              │
│  ├── 收益平滑：自相关检验                               │
│  ├── 幸存者偏差：了解完整策略历史                       │
│  ├── 短期年化：避免用短期表现推断长期                   │
│  └── 分布假设：注意 fat tail 影响                       │
└─────────────────────────────────────────────────────────┘
```

---

*文档创建时间：2026-02-24*  
*所属阶段：Phase 3 - 量化技能（第14/20项）*
