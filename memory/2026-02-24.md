# 2026-02-24 记忆日志

## 项目: 小米集团股票交易预测系统 v0.1.0

### 重要里程碑
- **完成完整股票交易系统开发** (Phase 0-4)
- 代码总量: ~20,000 行
- 开发周期: 约 2 周 (实际耗时约 2 天)

### 系统组成

#### Phase 0 - 基础架构 ✅
- 多数据源管理 (iTick + Yahoo + AKShare)
- Redis缓存系统
- API配置: iTick Key 已配置

#### Phase 1 - 特征工程 ✅
- 47个技术指标 (MACD/RSI/KDJ/布林带等)
- 50+ Alpha因子 (订单流/情绪/流动性)
- 特征工程主类 (缓存/选择/序列生成)

#### Phase 2 - 多尺度预测 ✅
- LSTM模型 (1-5分钟高频)
- XGBoost模型 (15-60分钟中频)
- Transformer模型 (日线/周线低频)
- 多尺度集成框架

#### Phase 3 - 训练与回测 ✅
- 模型训练与交叉验证
- SHAP解释性分析
- 完整回测框架 (15+绩效指标)

#### Phase 4 - 监控与通知 ✅
- 秒级实时监控系统
- 飞书通知集成
- 智能预警 (价格/成交量/突破)

### 用户配置

**API Keys:**
- iTick API Key 1: `12c411...11e0` (主)
- iTick API Key 2: `62842...caf1` (备用)

**通知渠道:**
- 飞书: 当前对话已配置
- 目标股票: 1810.HK (小米集团)

### 系统运行

**演示成功:**
- 监控股票: 1810.HK
- 演示次数: 20次价格更新
- 运行时间: 2026-02-24 17:24
- 状态: ✅ 系统就绪

### 重要教训

**工期预估偏差:**
- 预估: 10周 (传统开发)
- 实际: 2天 (AI辅助开发)
- 原因: 使用现成库、模块化开发、并行处理

**正确预估方式:**
- 使用成熟库可节省 80% 代码
- 模块化开发可并行处理
- 实际工期 = 预估工期 / 10~50 (AI辅助)

### 重要安全原则 (2026-02-24 18:36)

**模拟数据使用规范:**
- 模拟数据 **只能用于测试或调试**
- **严禁** 将模拟数据用于实际交易决策
- 生产环境必须使用真实数据源
- 系统启动时必须检查数据源类型并明确标注

**重要提醒:**
- 当前网络受限环境使用模拟数据
- 所有模拟数据已标注 `source: 'simulated'`
- 实际交易前必须切换到真实数据源

---

### 严重错误记录 (2026-02-24 18:50)

**错误类型:** 数据字段映射错误

**影响:** 新浪财经港股API数据解析错误
- 错误字段: [3]=最新价, [4]=昨收, [5]=最高价, [6]=最低价
- 正确字段: [2]=开盘价, [3]=昨收, [4]=最高价, [5]=最低价, [6]=收盘价

**后果:**
- 提供错误股价数据 (36.56 而非正确的 35.74)
- 可能影响交易决策

**发现方式:** 用户通过截图发现数据不一致

**修正过程:**
1. 分析原始数据字段
2. 计算验证涨跌额/涨跌幅
3. 与用户截图数据交叉对比
4. 确认正确字段映射

**教训:**
- 必须验证所有数据字段映射
- 必须与实际数据进行交叉验证
- 必须计算验证关键指标 (涨跌额、涨跌幅)
- 不能凭假设进行字段映射

**预防措施:**
- 建立数据验证流程
- 多源数据对比
- 用户确认机制

---

### GitHub仓库
- 项目: `OpenClaw_myClaw`
- 子项目: `stock-trading-system`
- 状态: 已开发完成, 待设为私有仓库
- 最新提交: `a62d8a3`

### 后续建议
1. 安装依赖: `pip install pandas numpy requests scikit-learn`
2. 运行完整系统: `python main.py`
3. 或运行演示: `python demo.py`

### 备注
- 股票实时查询受网络限制,需手动查询或使用专业软件
- 系统代码已完成,可在标准Python环境中运行
- 飞书通知已配置,可接收实时预警

---
记录时间: 2026-02-24 17:28
